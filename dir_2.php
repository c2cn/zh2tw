<?php/** * 简体转换繁体工具 *  * 用途： * 简体转繁体 *  * 特点： * 实现了词汇转换 *  * @author 宋健 * @version 0.1, 2012-1-9 */set_time_limit(0);date_default_timezone_set('PRC');header("Content-type: text/html; charset=utf-8");include_once('ZhConversion.php');$dir_path = 'D:\新建文件夹'; //需要转换到文件目录$suffix = array('php','html','css','txt'); //需要转换到文件类型$file_charset = ''; //导入文件的文件编码，留空为UTF-8$new_needle = array_merge($zh2TW, $zh2Hant);$dir_path = iconv('UTF-8','GBK',$dir_path);directory_traversal($dir_path,$suffix,$new_needle,$file_charset);/** * 转换一个文件 *  * @access global * @param mixed $file 文件路径 * @param mixed $new_needle 转换的数组 * @param mixed $file_charset 导入文件编码 * @return void */function conversion_one_file($file,$new_needle,$file_charset){    $input = !empty($file_charset)?iconv($file_charset,'UTF-8',file_get_contents($file)):file_get_contents($file);    $needle = array_keys($new_needle);    $output = !empty($file_charset)?iconv('UTF-8',$file_charset,str_replace($needle, $new_needle, $input)):str_replace($needle, $new_needle, $input);    file_put_contents($file,$output);}/** * 遍历目录 *  * @access global * @param mixed $dir_p 目录地址 * @param mixed $new_needle 转换的数组 * @param mixed $file_charset 导入文件编码 * @return void */function directory_traversal($dir_p,$suffix,$new_needle,$file_charset){    $dir_p .= '\\';    $dir = opendir($dir_p);    readdir($dir);readdir($dir);    while(($item = readdir($dir)) !== false) {        if($item == '.svn') continue;        $item = $dir_p.$item;        if(is_file($item)){            $file = & $item;            $file_info = pathinfo($file);            if(in_array($file_info['extension'],$suffix)) {                conversion_one_file($file,$new_needle,$file_charset);            }        }else if(is_dir($item)){            directory_traversal($item,$suffix,$new_needle,$file_charset);        }    }    closedir($dir);}